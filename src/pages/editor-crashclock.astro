---
import Layout from '../layouts/Layout.astro';
import HeaderFixed from '../components/HeaderFixed.astro';
---

<Layout>
  <HeaderFixed />
  
  <main class="editor-page">
    <div class="editor-layout">
      <aside class="controls-panel">
        <div class="panel-header">
          <h2>CRASH CLOCK</h2>
        </div>

        <div class="control-section">
          <h3>Parametri</h3>
          <div class="control-group">
            <label for="seed">Seed / Nome</label>
            <input type="text" id="seed" value="12345" placeholder="Il tuo nome o numero">
          </div>
          <button id="regenerate" class="btn-secondary" style="margin-bottom: 16px;">Rigenera Seed</button>
        </div>

        <div class="control-section">
          <h3>Distribuzione</h3>
          <div class="control-group">
            <label for="particleCount">Numero Particelle</label>
            <input type="range" id="particleCount" min="500" max="6000" value="2200" step="100">
            <span class="value-display" id="particleCountValue">2200</span>
          </div>
          <div class="control-group">
            <label for="particleSize">Dimensione Base</label>
            <input type="range" id="particleSize" min="2" max="16" value="6" step="1">
            <span class="value-display" id="particleSizeValue">6</span>
          </div>
          <div class="control-group">
            <label for="particleSizeJitter">Variazione Dimensione</label>
            <input type="range" id="particleSizeJitter" min="0" max="16" value="8" step="1">
            <span class="value-display" id="particleSizeJitterValue">8</span>
          </div>
        </div>

        <div class="control-section">
          <h3>Animazione</h3>
          <div class="control-group">
            <label for="wobbleAmp">Ampiezza Wobble</label>
            <input type="range" id="wobbleAmp" min="0" max="40" value="10" step="1">
            <span class="value-display" id="wobbleAmpValue">10</span>
          </div>
          <div class="control-group">
            <label for="noiseFlow">Noise Flow</label>
            <input type="range" id="noiseFlow" min="0" max="0.6" value="0.12" step="0.02">
            <span class="value-display" id="noiseFlowValue">0.12</span>
          </div>
        </div>

        <div class="control-section">
          <h3>Colore</h3>
          <div class="control-group">
            <label for="hue">Tonalità Particelle</label>
            <input type="range" id="hue" min="0" max="360" value="0" step="1">
            <span class="value-display" id="hueValue">0</span>
          </div>
          <div class="control-group">
            <label for="bgHue">Tonalità Sfondo</label>
            <input type="range" id="bgHue" min="0" max="360" value="360" step="1">
            <span class="value-display" id="bgHueValue">360</span>
          </div>
        </div>

        <div class="control-section">
          <h3>Interazione</h3>
          <div class="control-group">
            <label for="mouseMode">Interazione Mouse</label>
            <select id="mouseMode">
              <option value="repel" selected>Respingi</option>
              <option value="attract">Attira</option>
            </select>
          </div>
          <div class="control-group">
            <label for="mouseForce">Forza Click</label>
            <input type="range" id="mouseForce" min="0" max="40" value="18" step="1">
            <span class="value-display" id="mouseForceValue">18</span>
          </div>
          <div class="control-group">
            <label for="mouseRadius">Raggio Interazione</label>
            <input type="range" id="mouseRadius" min="40" max="240" value="140" step="10">
            <span class="value-display" id="mouseRadiusValue">140</span>
          </div>
        </div>

        <div class="button-group">
          <button id="playPause" class="btn-control">Pausa</button>
        </div>

        <div class="button-group">
          <button id="downloadPNG" class="btn-primary">Scarica PNG</button>
          <button id="downloadGIF" class="btn-secondary">Scarica GIF</button>
        </div>

        <a href="/editor" class="back-link">← Torna ai generatori</a>
      </aside>

      <section class="canvas-section">
        <div id="canvasContainer" class="canvas-container"></div>
      </section>
    </div>
  </main>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js" is:inline></script>
  <script src="https://cdn.jsdelivr.net/npm/gif.js@0.2.0/dist/gif.js" is:inline></script>
  <script src="/js/posterStorage.js" is:inline></script>
  <script src="/js/downloadNotification.js" is:inline></script>
  <script src="/js/crashClockEditor.js" is:inline></script>
</Layout>

<style>
  @import '../assets/editor.css';
</style>
