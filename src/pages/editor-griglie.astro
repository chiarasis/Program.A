---
import Layout from '../layouts/Layout.astro';
import HeaderFixed from '../components/HeaderFixed.astro';
---

<Layout>
  <HeaderFixed />
  
  <main class="editor-page">
    <div class="editor-layout">
      <aside class="controls-panel">
        <div class="panel-header">
          <h2>GRIGLIE</h2>
        </div>
        <div class="control-section">
          <h3>Parametri</h3>
          <div class="control-group">
            <label for="seed">Nome</label>
            <input type="text" id="seed" value="12345" placeholder="Il tuo nome o numero">
          </div>
          <div class="control-group">
            <label for="gridSize">Dimensione griglia</label>
            <input type="range" id="gridSize" min="5" max="30" value="12" step="1">
            <span class="value-display" id="gridSizeValue">12</span>
          </div>
          <div class="control-group">
            <label for="rotationSpeed">Velocità rotazione</label>
            <input type="range" id="rotationSpeed" min="0" max="5" value="1" step="0.1">
            <span class="value-display" id="rotationSpeedValue">1</span>
          </div>
          <div class="control-group">
            <label for="rotationDirection">Direzione</label>
            <select id="rotationDirection">
              <option value="1">Orario</option>
              <option value="-1">Antiorario</option>
              <option value="0">Statico</option>
            </select>
          </div>
        </div>

        <div class="control-section">
          <h3>Colore</h3>
          <div class="control-group">
            <label for="bgColor">Colore sfondo</label>
            <select id="bgColor">
              <option value="black">Nero</option>
              <option value="white">Bianco</option>
            </select>
          </div>
          <div class="control-group">
            <label for="lineColor">Colore linee</label>
            <select id="lineColor">
              <option value="black">Nero</option>
              <option value="white" selected>Bianco</option>
              <option value="color">Colore</option>
            </select>
          </div>
          <div class="control-group">
            <label for="hue">Tonalità</label>
            <input type="range" id="hue" min="0" max="360" value="200" step="1">
            <span class="value-display" id="hueValue">200</span>
          </div>
        </div>

        <div class="control-section">
          <h3>Layer</h3>
          <div class="control-group">
            <label for="lineSpacing">Spaziatura linee</label>
            <input type="range" id="lineSpacing" min="5" max="50" value="15" step="1">
            <span class="value-display" id="lineSpacingValue">15</span>
          </div>
          <div class="control-group">
            <label for="layerCount">Numero layer</label>
            <input type="range" id="layerCount" min="2" max="15" value="4" step="1">
            <span class="value-display" id="layerCountValue">4</span>
          </div>
          <div class="control-group">
            <label for="layerRotation">Rotazione layer (°)</label>
            <input type="range" id="layerRotation" min="0" max="180" value="45" step="1">
            <span class="value-display" id="layerRotationValue">45</span>
          </div>
        </div>

        <div class="button-group">
          <button id="regenerate" class="btn-primary">Rigenera</button>
          <button id="downloadPNG" class="btn-secondary">Scarica PNG</button>
          <button id="downloadGIF" class="btn-secondary">Scarica GIF (5s)</button>
        </div>

        <a href="/editor" class="back-link">← Torna ai generatori</a>
      </aside>

      <section class="canvas-section">
        <div id="canvasContainer" class="canvas-container"></div>
      </section>
    </div>
  </main>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js" is:inline></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gif.js/0.2.0/gif.js" is:inline></script>
  <script src="/js/posterStorage.js" is:inline></script>
  <script src="/js/downloadNotification.js" is:inline></script>
  <script src="/js/griglieEditor.js" is:inline></script>
</Layout>

<style>
  @import '../assets/editor.css';
</style>
