---
import Layout from '../layouts/Layout.astro';
import HeaderFixed from '../components/HeaderFixed.astro';
---

<Layout>
  <HeaderFixed />
  
  <main class="editor-page">
    <div class="editor-layout">
      <aside class="controls-panel">
        <div class="panel-header">
          <h2>ROMBI</h2>
          <p class="panel-subtitle">Poster / Rombi animati — prototipo</p>
        </div>

        <div class="control-group">
          <label for="rotationSpeed">Velocità Rotazione</label>
          <input type="range" id="rotationSpeed" min="-5" max="5" value="0.6" step="0.1">
          <span class="value-display" id="rotationSpeedValue">0.6</span>
        </div>

        <div class="control-group">
          <label for="pulseSpeed">Velocità Pulsazione</label>
          <input type="range" id="pulseSpeed" min="0" max="5" value="1" step="0.1">
          <span class="value-display" id="pulseSpeedValue">1</span>
        </div>

        <div class="control-group">
          <label for="pulseAmount">Intensità Pulsazione</label>
          <input type="range" id="pulseAmount" min="0" max="1" value="0.25" step="0.01">
          <span class="value-display" id="pulseAmountValue">0.25</span>
        </div>

        <div class="control-group">
          <label for="lineCount">Numero Linee</label>
          <input type="range" id="lineCount" min="10" max="300" value="120" step="1">
          <span class="value-display" id="lineCountValue">120</span>
        </div>

        <div class="control-group">
          <label for="strokeWeight">Spessore Linee</label>
          <input type="range" id="strokeWeight" min="0.2" max="6" value="1" step="0.1">
          <span class="value-display" id="strokeWeightValue">1</span>
        </div>

        <div class="control-group">
          <label for="scale">Scala</label>
          <input type="range" id="scale" min="0.5" max="2.5" value="1" step="0.01">
          <span class="value-display" id="scaleValue">1</span>
        </div>

        <div class="control-group">
          <label for="colorMode">Modalità Colore</label>
          <select id="colorMode">
            <option value="rgb">RGB</option>
          </select>
        </div>

        <div class="control-group">
          <label for="hue">Tonalità</label>
          <input type="range" id="hue" min="0" max="360" value="190" step="1">
          <span class="value-display" id="hueValue">190</span>
        </div>

        <div class="button-group">
          <button id="toggleAnimate" class="btn-primary">Pause</button>
          <button id="downloadPNG" class="btn-secondary">Scarica PNG (1000x1500)</button>
          <button id="downloadGIF" class="btn-secondary">Scarica GIF (short)</button>
        </div>

        <a href="/editor" class="back-link">← Torna ai generatori</a>
      </aside>

      <section class="canvas-section">
        <div id="canvasContainer" class="canvas-container"></div>
      </section>
    </div>
  </main>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js" is:inline></script>
  <script src="/js/rombiEditor.js" is:inline></script>
</Layout>

<style>
  .editor-page { min-height: 100vh; background: #000; color: #fff; padding-top: 120px; }
  .editor-layout { display: grid; grid-template-columns: 320px 1fr; min-height: calc(100vh - 120px); }
  .controls-panel { background: rgba(255,255,255,0.02); border-right: 1px solid rgba(255,255,255,0.06); padding: 28px; overflow-y:auto; }
  .panel-header { margin-bottom: 24px; padding-bottom: 12px; border-bottom: 1px solid rgba(255,255,255,0.04); }
  .panel-header h2 { font-size: 1.2rem; margin-bottom:4px; font-family: 'VG5000', monospace; }
  .panel-subtitle { font-size: 12px; color:#888; }
  .control-group { margin-bottom: 18px; }
  .control-group label { display:block; font-size: 11px; color:#888; margin-bottom:8px; font-family:'Basier Square Mono',monospace; }
  .value-display { display:block; margin-top:8px; font-size:13px; color:#fff; }
  .button-group { display:flex; flex-direction:column; gap:10px; margin-top:18px; }
  .btn-primary, .btn-secondary { padding:12px 14px; border-radius:4px; border:none; cursor:pointer; font-family:'Basier Square Mono',monospace; }
  .btn-primary { background:#fff; color:#000; }
  .btn-secondary { background:transparent; color:#fff; border:1px solid rgba(255,255,255,0.12); }
  .back-link { display:block; margin-top:20px; color:#888; text-decoration:none; }
  .canvas-section { display:flex; align-items:center; justify-content:center; padding:40px; background:#000; }
  .canvas-container { box-shadow: 0 30px 80px rgba(0,0,0,0.6); }
  @media (max-width: 900px) { .editor-layout { grid-template-columns: 1fr; } .controls-panel{ border-right:none; border-bottom:1px solid rgba(255,255,255,0.06); } }
</style>
